## 客服接收消息
使用http长轮询方式获取即时消息，消息应该包括操作和内容。其中操作必需，内容视操作类型而定。
### 请求方式
GET http://sparkapi.accuat.com/message/query?a|b=version&acks=acks

###	请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>
   </tr>
   <tr>
      <td>a|b</td>
      <td>String</td>
      <td>否</td>
      <td>[a]fter或[b]efore,二选一，为事件版本号,<br>
      可以为空，为空时即时消息;
 不为空时:获取此版本以前的历史事件或此版本以后的事件。 </td>
   </tr>
   <tr>
      <td>c</td>
      <td>String</td>
      <td>否</td>
      <td>确认之前接收过的消息,以逗号，分号分隔。</td>
   </tr>
   <tr>
      <td>t</td>
      <td>String</td>
      <td>否</td>
      <td>事件的类型,默认所有类型的事件。</td>
   </tr>
</table>

### 响应参数
如果操作失败返回错误信息，如果操作成功返回操作的列表：
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>
   </tr>
   <tr>
      <td>e</td>
      <td>string</td>
      <td>是</td>
      <td>操作类型</td>
   </tr>
   <tr>
      <td>Data</td>
      <td>Json</td>
      <td>否</td>
      <td>根据类型的不同返回的内容不同</td>
   </tr>
</table>

新消息返回的Data对象
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>Type</td>
      <td>操作类型</td>
      <td>Int</td>
      <td>0-AddSession;1-DelSession</td>
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>唯一会话Id</td>
   </tr>
   <tr>
      <td>SessionType</td>
      <td>Int</td>
      <td>否</td>
      <td>会话类型，参考会话类型</td>
   </tr>
   <tr>
      <td>FromId</td>
      <td>String</td>
      <td>否</td>
      <td>发送者ID</td>
   </tr>
   <tr>
      <td>FromName</td>
      <td>String</td>
      <td>否</td>
      <td>发送者名称</td>
   </tr>
   <tr>
      <td>FromImage</td>
      <td>String</td>
      <td>否</td>
      <td>发送者头像</td>
   </tr>
   <tr>
      <td>ToId</td>
      <td>String</td>
      <td>否</td>
      <td>接收者ID</td>
   </tr>
   <tr>
      <td>ToName</td>
      <td>String</td>
      <td>否</td>
      <td>接收者名称</td>
   </tr>
   <tr>
      <td>ToImage</td>
      <td>String</td>
      <td>否</td>
      <td>接收者头像</td>
   </tr>
   <tr>
      <td>Message</td>
      <td>List</td>
      <td>否</td>
      <td>消息内容</td>
    </tr>
</table>

Message对象:
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>Type</td>
      <td>Int</td>
      <td>是</td>
      <td>消息类型:0 – 接收;1 – 发送</td>
   </tr>
   <tr>
      <td>Id</td>
      <td>String</td>
      <td>是</td>
      <td>消息Id唯一，用于客户端去重</td>
   </tr>
   <tr>
      <td>ContentType</td>
      <td>String</td>
      <td>是</td>
      <td>内容类型:0 – 文本;1 – 图片</td>
   </tr>
   <tr>
      <td>Content</td>
      <td>String</td>
      <td>是</td>
  	  <td>内容类型为图片时内容只是图片的Url</td>
   </tr>
   <tr>
      <td>CreateTime</td>
      <td>String</td>
      <td>是</td>
	  <td>创建时间：yyyy-MM-dd HH:mm:ss，用于客户端排序</td>
   </tr>
</table>

## 结束会话
会话所有者可以结束会话
### 请求方式
POST http://sparkapi.accuat.com/session/close
###	请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>会话ID, 需要关闭的会话ID</td>
   </tr>
</table>
### 响应参数
如果操作失败返回错误编号和错误内容。如果操作成功返回成功内容。

## 转移会话
会话所有者可以将当前会话转移到其它成员;
### 请求方式
POST http://sparkapi.accuat.com/session/transfer
### 请求参数
<table>
   <tr>
        <td>参数</td>
        <td>类型</td>
        <td>必须</td>
        <td>说明</td>      
   </tr>
   <tr>
      <td>SessionId</td>
      <td>String</td>
      <td>是</td>
      <td>会话ID, 需要关闭的会话ID</td>
   </tr>
   <tr>
      <td>ToNewId</td>
      <td>String</td>
      <td>是</td>
      <td>新客服Id, 需要关闭的会话ID</td>
   </tr>
</table>
### 响应参数
如果请求失败，返回错误和错误内容。请求成功返回正确即可。